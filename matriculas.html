<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matr√≠cula</title>
  <link rel="stylesheet" href="css/matriculas.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <header class="hero">
      <h1 class="titulo">üìã Fa√ßa sua Matr√≠cula</h1>
      <p class="subtitulo">Preencha seus dados com aten√ß√£o. Campos com * s√£o obrigat√≥rios.</p>
    </header>

    <form id="formMatricula" class="card" novalidate>
      <!-- DADOS DO ALUNO -->
      <fieldset>
        <legend><span>üë¶ Aluno</span></legend>

        <div class="grid">
          <div class="form-group">
            <label for="nome">Nome *</label>
            <input type="text" name="nome" id="nome" required />
          </div>

          <div class="form-group sm">
            <label for="idade">Idade *</label>
            <input type="number" name="idade" id="idade" min="1" required />
            <!-- Mensagem de valida√ß√£o de idade -->
            <p id="erroIdade" style="display:none; color:#c62828; margin-top:6px;">
              O aluno n√£o tem idade para a oficina
            </p>
            <small class="help">Oficinas dispon√≠veis para 11 a 18 anos.</small>
          </div>

          <div class="form-group">
            <label for="cpf">CPF *</label>
            <input type="text" name="cpf" id="cpf" maxlength="14" required />
          </div>

          <div class="form-group">
            <label for="telefone">Telefone *</label>
            <input type="tel" name="telefone" id="telefone" required />
          </div>

          <!-- OFICINAS DIN√ÇMICAS -->
          <div class="form-group">
            <label>Oficinas *</label>
            <div class="checkbox-group" id="oficinasGroup">
              <!-- preenchido pelo JS a partir da cole√ß√£o "oficinas" -->
            </div>
          </div>

          <div class="form-group sm">
            <label for="sexo">Sexo *</label>
            <select name="sexo" id="sexo" required>
              <option value="">Selecione</option>
              <option>Masculino</option>
              <option>Feminino</option>
              <option>Outro</option>
            </select>
          </div>

          <div class="form-group sm">
            <label for="raca">Ra√ßa *</label>
            <select name="raca" id="raca" required>
              <option value="">Selecione</option>
              <option>Branca</option>
              <option>Preta</option>
              <option>Parda</option>
              <option>Amarela</option>
              <option>Ind√≠gena</option>
              <option>Prefere n√£o declarar</option>
            </select>
          </div>

          <div class="form-group sm">
            <label for="religiao">Religi√£o</label>
            <select name="religiao" id="religiao">
              <option value="">Selecione</option>
              <option>Cat√≥lica</option>
              <option>Evang√©lica</option>
              <option>Esp√≠rita</option>
              <option>Outra</option>
            </select>
          </div>

          <div class="form-group">
            <label for="escola">Escola *</label>
            <select name="escola" id="escola" required>
              <option value="" disabled selected>Selecione</option>

              <!-- CEIs -->
              <option>CEI Jos√© Alzir Silva Lima</option>
              <option>CEI Jos√© Herm√≠nio Rodrigues do Nascimento</option>
              <option>CEI M√£e Toinha</option>
              <option>CEI Maria da Concei√ß√£o Barros Pinho</option>
              <option>CEI Maria de Lourdes Bezerra Costa</option>
              <option>CEI Maria Mirtes Costa Salgado</option>
              <option>CEI Sara Rosita Ferreira</option>
              <option>CEI Terezinha Mariano Germano</option>

              <!-- Escolas de Ensino Fundamental e M√©dio -->
              <option>EEF 25 de Maio I</option>
              <option>EEF √Ålvaro de Ara√∫jo Carneiro</option>
              <option>EEF Dau Alberto</option>
              <option>EEF Francisco Correia Lima</option>
              <option>EEF Jo√£o Costa</option>
              <option>EEF Jos√© Severo de Pinho</option>
              <option>EEF Margarida Alves</option>
              <option>EEF Padre Jaime Fel√≠cio</option>
              <option>EEF Paula Queiroz</option>
              <option>EEF Vicente Patr√≠cio de Almeida</option>
              <option>EEIF Antonio Alves da Silva</option>
              <option>EEIF Comunidade Pau Ferros</option>
              <option>EEIF Dami√£o Carneiro</option>
              <option>EEIF Eli√¥nia Campos</option>

              <!-- Escolas Particulares e T√©cnicas -->
              <option>IEST Santa Teresinha Instituto Educacional</option>
              <option>EEEP Joao Jackson Lobo Guerra</option>
              <option>EEEP Venceslau Vieira Batista</option>
              <option>EEM Alfredo Machado</option>
              <option>IFCE Campus Boa Viagem</option>
            </select>
          </div>

          <div class="form-group sm">
            <label for="bairro">Bairro onde mora *</label>
            <select name="bairro" id="bairro" required>
              <option value="" disabled selected>Selecione</option>
              <optgroup label="Bairros do Distrito-Sede">
                <option>Centro</option><option>Santa Teresinha</option><option>Henrique Jorge</option>
                <option>S√£o Jos√©</option><option>Boa Vista</option><option>Alto da Alegria</option>
                <option>Bairro dos Pinhos</option><option>Nova Madalena</option><option>Madalena Velha</option>
                <option>Santana</option>
              </optgroup>
              <optgroup label="Demais Distritos">
                <option>Sede</option><option>Macaoca</option><option>Cajazeiras</option>
                <option>Uni√£o</option><option>Cacimba Nova</option><option>Paus Branco</option>
              </optgroup>
            </select>
          </div>

          <div class="form-group sm">
            <label for="rede">Rede de Ensino *</label>
            <select name="rede" id="rede" required>
              <option value="">Selecione</option>
              <option>Municipal</option>
              <option>Estadual</option>
              <option>Federal</option>
              <option>Particular</option>
            </select>
          </div>

          <div class="form-group sm">
            <label for="tipoMatricula">Tipo de Matr√≠cula *</label>
            <select name="tipoMatricula" id="tipoMatricula" required>
              <option value="" disabled selected>Selecione</option>
              <option value="A">Matr√≠cula</option>
              <option value="B">Rematr√≠cula</option>
            </select>
          </div>

          <!-- PCD -->
          <div class="form-group sm">
            <label>PCD (Pessoa com Defici√™ncia)? *</label>
            <div class="radio-group" id="pcdGroup">
              <label class="chip"><input type="radio" name="pcd" value="N√£o" checked> N√£o</label>
              <label class="chip"><input type="radio" name="pcd" value="Sim"> Sim</label>
            </div>
          </div>

          <div class="form-group pcd-upload hidden" id="pcdUploadWrap">
            <label for="pcdArquivo">Comprovante PCD (PDF/JPG/PNG, at√© 5MB)</label>
            <input type="file" id="pcdArquivo" accept=".pdf,.jpg,.jpeg,.png" />
            <small class="help">Anexe o laudo/comprovante. Obrigat√≥rio se marcou ‚ÄúSim‚Äù.</small>
            <div id="pcdArquivoNome" class="file-name"></div>
          </div>
        </div>
      </fieldset>

      <!-- DADOS DO RESPONS√ÅVEL -->
      <fieldset>
        <legend><span>üë™ Respons√°vel</span></legend>
        <div class="grid">
          <div class="form-group">
            <label for="responsavel">Nome *</label>
            <input type="text" name="responsavel" id="responsavel" required />
          </div>

          <div class="form-group">
            <label for="telefoneResponsavel">Telefone *</label>
            <input type="tel" name="telefoneResponsavel" id="telefoneResponsavel" required />
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" name="email" id="email" />
          </div>

          <div class="form-group sm">
            <label for="integrantes">N¬∫ de Integrantes na Fam√≠lia</label>
            <input type="number" name="integrantes" id="integrantes" min="1" />
          </div>

          <div class="form-group">
            <label>Programas Sociais</label>
            <div class="checkbox-group">
              <label class="chip"><input type="checkbox" name="programas[]" value="Bolsa Fam√≠lia" />Bolsa Fam√≠lia</label>
              <label class="chip"><input type="checkbox" name="programas[]" value="P√©-de-Meia" />P√©-de-Meia</label>
              <label class="chip"><input type="checkbox" name="programas[]" value="Cesta B√°sica" />Cesta B√°sica</label>
              <label class="chip"><input type="checkbox" name="programas[]" value="Nenhum" />Nenhum</label>
            </div>
          </div>
        </div>
      </fieldset>

      <div class="actions">
        <button type="submit" id="btnEnviar" class="btn primary">Enviar Matr√≠cula</button>
      </div>
    </form>
  </div>

  <!-- sem hidden para o toast aparecer -->
  <div id="notificacao" class="notificacao-topo"></div>

  <div class="rodape">
    <img src="assets/rodape_site.png" alt="Rodap√© com logos" />
  </div>

  <!-- M√°scaras -->
  <script>
    document.addEventListener('input', function (e) {
      if (e.target && e.target.id === 'cpf') {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 11) value = value.slice(0, 11);
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        e.target.value = value;
      }
    });
    function mascaraTelefone(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.length > 11) value = value.slice(0, 11);
      if (value.length > 2) value = `(${value.slice(0, 2)}) ${value.slice(2)}`;
      if (value.length >= 10) value = value.replace(/(\(\d{2}\)) (\d{5})(\d{0,4})/, '$1 $2-$3');
      input.value = value;
    }
    document.addEventListener('input', function (e) {
      if (e.target && (e.target.id === 'telefone' || e.target.id === 'telefoneResponsavel')) {
        mascaraTelefone(e.target);
      }
    });
  </script>

  <!-- Firebase compat (ordem importa) + Storage + seu JS -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="js/matriculas.js"></script>
</body>
</html>
